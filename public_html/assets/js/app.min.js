(()=>{var e,t={467:()=>{document.addEventListener("DOMContentLoaded",(function(){if(document.querySelector("#dateCurrent"))setInterval((function(){var e=function(e){return("0"+e).slice(-2)};dayName=new Array("domingo","segunda","terça","quarta","quinta","sexta","sábado"),monName=new Array("janeiro","fevereiro","março","abril","Maio","junho","agosto","outubro","novembro","dezembro");var t=new Date;document.getElementById("dateCurrent").innerHTML="Hoje é "+dayName[t.getDay()]+", "+t.getDate()+" de "+monName[t.getMonth()]+" de "+t.getFullYear()+", "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())}),1e3)}))},553:()=>{document.addEventListener("DOMContentLoaded",(function(){if(document.querySelector("#buttonLogout")){var e=document.querySelector("#buttonLogout");e.addEventListener("click",(function(t){t.preventDefault(),null!==localStorage.getItem("_userTokenJwt")&&localStorage.removeItem("_userTokenJwt"),null!==localStorage.getItem("_dataUser")&&localStorage.removeItem("_dataUser"),window.location.href="".concat(e.getAttribute("href"))}))}}))},638:()=>{document.addEventListener("DOMContentLoaded",(function(){if(document.querySelector(".pgFavorite")){var e=function(){document.querySelectorAll(".btnFavorite").forEach((function(e){e.addEventListener("click",(function(n){t(e)}))}))},t=function(e){var t=e.getAttribute("data-favorite"),n="Bearer "+localStorage.getItem("_userTokenJwt"),o="".concat("http://localhost","/proxy/favorits__delete__").concat(t);fetch(o,{method:"DELETE",withCredentials:!0,credentials:"include",headers:{Authorization:n}}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(t){"success"==t.status?(e.closest("article").remove(),toast(t.message,"success",3e3)):"error"==t.status&&toast(t.message,"error",3e3)})).catch((function(e){toast("Oooops, Erro na comunicação: ".concat(e),"error",3e3)}))};n="Bearer "+localStorage.getItem("_userTokenJwt"),o=JSON.parse(localStorage.getItem("_dataUser")),r="".concat("http://localhost","/proxy/favorits__list__").concat(o.hash),a=document.querySelector("#cards"),fetch(r,{method:"GET",withCredentials:!0,credentials:"include",headers:{Authorization:n}}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(t){if("success"==t.status)t.results.forEach((function(e){var t="".concat("http://localhost","/assets/images/image-not-found.jpg");"null"!==e.poster_path&&(t="".concat("https://image.tmdb.org/t/p/w500").concat(e.poster_path));var n='\n                    <article class="container-middle border-favorite">\n                        <img class="article-img imageCover-middle" src="'.concat(t,'" alt=" ">\n                        <h1 class="article-title">').concat(e.title,"</h1>\n                        <div class='middle'>\n                            <div class='text'>\n                                <button class='btnFavorite' alt='Favoritar' data-favorite='").concat(e.id,'\'>\n                                    <img class="article-img icon-middle iconBtnFavorite" src="').concat("http://localhost",'/assets/images/trash-bin.svg" alt=" ">\n                                </button>\n                            </div>\n                        </div>\n                    </article>\n                  ');a.insertAdjacentHTML("beforeend","".concat(n))})),e();else if("error"==t.status){var n=document.querySelector("#oops"),o="\n                         ".concat(t.message,"\n                      ");n.insertAdjacentHTML("beforeend","".concat(o))}})).catch((function(e){var t=document.querySelector("#oops"),n="\n                        <h2>Oooops, </h2>\n                        <p>Erro na comunicação: ".concat(e,"</p>\n                      ");t.insertAdjacentHTML("beforeend","".concat(n))}))}var n,o,r,a}))},916:()=>{function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],c=!0,s=!1;try{for(n=n.call(e);!(c=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(s)throw r}}return a}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}document.addEventListener("DOMContentLoaded",(function(){if(document.querySelector("#searchMovies")){var t=function(e,t){for(var o=document.querySelector("#summaryList"),r=document.querySelector("#ulList"),a=1;a<=e;a++){var c='<input class="itemPagination" type="radio" name="item" id="'.concat(a,'" title="Página ').concat(a,'">'),s='<li><label for="'.concat(a,'">Página ').concat(a,"</label></li>");o.insertAdjacentHTML("beforeend","".concat(c)),r.insertAdjacentHTML("beforeend","".concat(s))}document.querySelector("#custom-pagination").style.display="block";var i=document.querySelector("#result");i.style.display="block",i.innerHTML="".concat(t," resultados"),n()},n=function(){document.querySelectorAll(".itemPagination").forEach((function(e){e.addEventListener("click",(function(t){document.querySelector("#cards").innerHTML="",o(e.getAttribute("id"))}))}))},o=function(e){var t="".concat("https://api.themoviedb.org/3/search/movie?api_key=af305a521c1b438c2bd1a68f3c28ba7c&language=pt-BR&query=").concat(s[0]),n=("".concat("https://image.tmdb.org/t/p/w500"),document.querySelector("#cards"));fetch("".concat(t,"&page=").concat(e),{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(e){e.results.forEach((function(e){var t;t=null!=e.poster_path?"".concat("https://image.tmdb.org/t/p/w500").concat(e.poster_path):"".concat("http://localhost","/assets/images/image-not-found.jpg");var o='\n                    <article class="container-middle">\n                        <img class="article-img imageCover-middle" src="'.concat(t,'" alt=" ">\n                        <h1 class="article-title">').concat(e.title,"</h1>\n                        <div class='middle'>\n                            <div class='text'>\n                                <button class='btnFavorite' alt='Favoritar' data-favorite='").concat(JSON.stringify(e).replaceAll("'",""),'\'>\n                                    <img class="article-img icon-middle iconBtnFavorite" src="').concat("http://localhost",'/assets/images/favorite-bin.svg" alt=" ">\n                                </button>\n                            </div>\n                        </div>\n                    </article>\n                  ');n.insertAdjacentHTML("beforeend","".concat(o))})),r()})).catch((function(e){var t=document.querySelector("#oops"),n="\n                        <h2>Oooops, </h2>\n                        <p>Erro na comunicação: ".concat(e,"</p>\n                      ");t.insertAdjacentHTML("beforeend","".concat(n))}))},r=function(){document.querySelectorAll(".btnFavorite").forEach((function(e){e.addEventListener("click",(function(t){a(e)}))}))},a=function(t){var n="Bearer "+localStorage.getItem("_userTokenJwt"),o=localStorage.getItem("_dataUser"),r="".concat("http://localhost","/proxy/favorits__add"),a=new FormData;Object.entries(JSON.parse(t.getAttribute("data-favorite"))).forEach((function(t){var n=e(t,2),o=n[0],r=n[1];"genre_ids"!=o&&a.append(o,r)})),a.append("user_hash",JSON.parse(o).hash),fetch(r,{body:a,method:"POST",withCredentials:!0,credentials:"include",headers:{Authorization:n}}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(e){"success"==e.status?function(e,t){var n=e.closest("article");n.classList.contains("border-favorite")?(n.classList.remove("border-favorite"),toast("Removido dos favoritos!","info",3e3)):(n.classList.add("border-favorite"),toast(t,"success",3e3))}(t,e.message):"error"==e.status&&toast(e.message,"error",3e3)})).catch((function(e){toast("Oooops, Erro na comunicação: ".concat(e),"error",3e3)}))},c=function(){document.querySelector("#result").style.display="none",document.querySelector("#custom-pagination").style.display="none";document.querySelector("#summaryList").innerHTML='<input type="radio" name="item" id="default" title="Paginaçao..." checked>',document.querySelector("#ulList").innerHTML="";document.querySelector("#cards").innerHTML="",document.querySelector("#oops").innerHTML="",s.pop()},s=[];document.querySelector("#searchMovies").addEventListener("submit",(function(e){var n;e.preventDefault(),c(),s.push(encodeURI(document.querySelector("#search").value)),n="".concat("https://api.themoviedb.org/3/search/movie?api_key=af305a521c1b438c2bd1a68f3c28ba7c&language=pt-BR&query=").concat(s[0]),fetch(n,{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(e){e.total_results>=1?t(e.total_pages,e.total_results):document.querySelector("#oops").insertAdjacentHTML("beforeend","".concat("\n                     <h2>Oooops, </h2>\n                     <p>Não encontramos resultados!</p>\n                  "))})).catch((function(e){var t=document.querySelector("#oops"),n="\n                        <h2>Oooops, </h2>\n                        <p>Erro na comunicação: ".concat(e,"</p>\n                      ");c(),t.insertAdjacentHTML("beforeend","".concat(n))})),o("1")})),document.querySelector("#btnClear").addEventListener("click",c)}}))},508:()=>{document.addEventListener("DOMContentLoaded",(function(){if(document.querySelector("#createAccount")){var e=document.querySelector("#createAccount");e.addEventListener("submit",(function(t){t.preventDefault(),function(){var t=document.querySelector("#buttons"),n=document.querySelector("#load"),o=document.querySelector("#msg"),r=document.querySelector("#fazerLogin");t.style.display="none",n.style.display="block",o.style.display="none",fetch(e.getAttribute("action"),{method:"POST",body:new FormData(e)}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(a){"success"==a.status?(e.reset(),n.style.display="none",o.style.display="block",r.style.display="block",o.innerHTML='<p class="msgSuccess">'.concat(a.message,"</p>")):"error"==a.status&&(n.style.display="none",t.style.display="block",o.style.display="block",o.innerHTML='<p class="msgError">'.concat(a.message,"</p>"))})).catch((function(e){o.innerHTML="".concat(e)}))}()}))}}))},84:()=>{function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],c=!0,s=!1;try{for(n=n.call(e);!(c=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(s)throw r}}return a}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}document.addEventListener("DOMContentLoaded",(function(){if(document.querySelector("#login")){var t=function(){var t=localStorage.getItem("_dataUser"),n=localStorage.getItem("_userTokenJwt"),o=new FormData;Object.entries(JSON.parse(t)).forEach((function(t){var n=e(t,2),r=n[0],a=n[1];o.append(r,a)})),o.append("_userTokenJwt",n),fetch("".concat("http://localhost","/setSession"),{method:"POST",body:o}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(e){"success"==e.status?setTimeout((function(){window.location.href="".concat(e.redirect)}),1e3):"error"==e.status&&(divLoad.style.display="none",divButtons.style.display="block",msg.style.display="block",msg.innerHTML='<p class="msgError">'.concat(e.message,"</p>"))})).catch((function(e){divLoad.style.display="none",divButtons.style.display="block",msg.style.display="block",msg.innerHTML="".concat(e)}))},n=document.querySelector("#login");n.addEventListener("submit",(function(e){e.preventDefault(),function(){var e=document.querySelector("#buttons"),o=document.querySelector("#load"),r=document.querySelector("#msg");e.style.display="none",o.style.display="block",r.style.display="none",fetch(n.getAttribute("action"),{method:"POST",body:new FormData(n)}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(a){"success"==a.status?(n.reset(),o.style.display="none",r.style.display="block",r.innerHTML='<p class="msgSuccess">'.concat(a.message,"</p>"),localStorage.setItem("_userTokenJwt",a._tokenJWT),localStorage.setItem("_dataUser",a._dataUser),t()):"error"==a.status&&(o.style.display="none",e.style.display="block",r.style.display="block",r.innerHTML='<p class="msgError">'.concat(a.message,"</p>"))})).catch((function(e){r.innerHTML="".concat(e)}))}()}))}}))},532:()=>{window.toast=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,o=document.createElement("div");o.className="toast "+t,o.innerHTML=e,setTimeout((function(){o.remove()}),n),document.body.appendChild(o)}},496:()=>{}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,n,r,a)=>{if(!n){var c=1/0;for(u=0;u<e.length;u++){for(var[n,r,a]=e[u],s=!0,i=0;i<n.length;i++)(!1&a||c>=a)&&Object.keys(o.O).every((e=>o.O[e](n[i])))?n.splice(i--,1):(s=!1,a<c&&(c=a));if(s){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={629:0,371:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[c,s,i]=n,l=0;if(c.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(i)var u=i(o)}for(t&&t(n);l<c.length;l++)a=c[l],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},n=self.webpackChunkdesafio=self.webpackChunkdesafio||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.O(void 0,[371],(()=>o(508))),o.O(void 0,[371],(()=>o(84))),o.O(void 0,[371],(()=>o(638))),o.O(void 0,[371],(()=>o(916))),o.O(void 0,[371],(()=>o(553))),o.O(void 0,[371],(()=>o(467))),o.O(void 0,[371],(()=>o(532)));var r=o.O(void 0,[371],(()=>o(496)));r=o.O(r)})();